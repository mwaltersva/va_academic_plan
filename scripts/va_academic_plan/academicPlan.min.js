function update_diploma_seal_checkboxes(e){if(e){for(i=0;i<=e.length;i++){$j.each(APForm.diploma_seal_checkboxes,function(){if(e[i]==$j(this).data("statecode")){$j(this).prop("checked",true)}})}}}function update_diploma_seal_field(){APForm.diploma_seal_code.val("");var e="";$j.each(APForm.diploma_seal_checkboxes,function(){if($j(this).prop("checked")===true){e=e.concat($j(this).data("statecode"))}});if(e.length>0){APForm.diploma_seal_code.val(e)}}function update_state_diploma_seal_code_display(){APForm.current_state_diploma_seal_code.html(APForm.va_diploma_seal.val())}function update_state_diploma_seal_code(){APForm.va_diploma_seal.val(APForm.diploma_seal_code.val());update_state_diploma_seal_code_display()}function update_career_cluster_options(){APForm.career_cluster.empty();var e='<option value="">Select a cluster...</option>';APForm.career_cluster.append(e);$j.each(CTECareerClusters,function(){e='<option value="'+this["state_code"]+'">'+this["description"]+"</option>";APForm.career_cluster.append(e)});if(APForm.va_cte_career_family_code.val()){APForm.career_cluster.val(APForm.va_cte_career_family_code.val())}}function update_state_career_cluster(){APForm.va_cte_career_family_code.val(APForm.career_cluster.val())}function update_career_pathway_options(){cluster=APForm.career_cluster.val();if(cluster){APForm.career_pathway.empty();var e='<option value="">Select a Pathway...</option>';APForm.career_pathway.append(e);$j.each(CTECareerClusters,function(){if(this.state_code==cluster){$j.each(this.career_pathways,function(){e='<option value="'+this.state_code+'">'+this.description+"</option>";APForm.career_pathway.append(e)})}});if(APForm.va_cte_career_pathway.val()){APForm.career_pathway.val(APForm.va_cte_career_pathway.val())}}else{APForm.career_pathway.empty()}}function update_state_career_pathway(){APForm.va_cte_career_pathway.val(APForm.career_pathway.val())}function create_program_of_study_table(){var e=[];$j.each(ProgramOfStudy.requirements,function(){if(this.grade_levels!==null){$j.each(this.grade_levels,function(t,n){if($j.inArray(n,e)===-1){e.push(n)}})}});e.sort(function(e,t){return e-t});$j("#pos_header").append("<th>Subject/Req.</th>");$j.each(e,function(e,t){cell='<th data-grade_level="'+t+'">'+t+'<br><a class="select_all" data-grade_level="'+t+'" title"Add">Select All</a></th>';$j("#pos_header").append(cell)});$j.each(ProgramOfStudy.requirements,function(){var t=0;var n=this;var r=$j("#pos_table tr").length;if(r%2===0){var i="evenRow"}else{var i="oddRow"}if(n.grade_levels){var s='<tr class="'+i+'" data-subject="'+this.name+'"><td class="bold" data-row_label="true">'+n.name+"</td>";var o=this.name;$j.each(e,function(e,r){if($j.inArray(r,n.grade_levels)!==-1){s+='<td data-grade_level="'+r+'" ';if(t>0){s+='colspan="'+t+'">'}else{s+=">"}s+='<input type="text" data-subject="'+o+'" data-grade_level="'+r+'" class="pos_course_input"></td>'}else{t++}})}else{var s='<tr class="'+i+'" data-subject="'+this.name+'"><td class="bold" data-row_label="true">'+n.name;s+='<td colspan="'+e.length+'"><input type="text" data-subject="'+this.name+'" class="pos_course_input"></td>'}s+="</tr>";$j("#pos_table").append(s);$j("input.pos_course_input").each(function(){$j(this).css("display","none");$j(this).autocomplete({source:function(e,t){$j.getJSON("course_information.json",{term:e.term},t)},search:function(){var e=this.value;if(e.length<2){return false}},focus:function(e,t){return false},select:function(e,t){var n={course_number:t.item.value,subject:$j(this).data("subject")};if($j(this).data("grade_level")!==undefined){n.grade_level=$j(this).data("grade_level")}else{n.grade_level=null}this.value="";ProgramOfStudy.schedule.push(n);update_program_of_study_table();return false},close:function(e,t){return false}})})})}function update_program_of_study_table(){$j('#pos_table tr td[data-row_label!="true"]').children("div").remove();if(ProgramOfStudy.schedule.length>0){$j.each(ProgramOfStudy.schedule,function(){var e=this.subject;var t=this.grade_level;var n=this.course_number;$j.getJSON("course_information.json",{single_course:1,course_number:this.course_number,studentid:window.ps_curstudid}).done(function(n){table_row=$j('#pos_table tr[data-subject="'+e+'"]');if(t){row_cell=table_row.children('td[data-grade_level="'+t+'"]')}else{row_cell=table_row.children('td[data-row_label!="true"]')}course_display='<div id="'+n.course_number+'"><input type="checkbox" class="course_checkbox" data-grade_level="'+t+'" data-subject="'+e+'" data-course_number="'+n.course_number+'" id="'+t+e+n.course_number+'"><label style="color: '+n.status+'" for="'+t+e+n.course_number+'">'+n.course_number+" - "+n.course_name+"</label></div>";row_cell.append(course_display)})})}}function select_all(e){$j('#pos_table input[type="checkbox"][data-grade_level="'+e+'"]').each(function(){if($j(this).is(":checked")){$j(this).attr("checked",false)}else{$j(this).attr("checked",true)}})}function remove_selected(){$j("#pos_table input.course_checkbox").each(function(){if($j(this).is(":checked")){subject=$j(this).attr("data-subject");grade_level=$j(this).attr("data-grade_level");course_number=$j(this).attr("data-course_number");$j.map(ProgramOfStudy.schedule,function(e,t){if(String(e.course_number)===course_number&&String(e.subject)===subject&&String(e.grade_level)===grade_level){index_to_remove=t}});ProgramOfStudy.schedule.splice(index_to_remove,1)}});update_program_of_study_table()}function group_action(e){if(e==="remove"){remove_selected()}}function update_POS_field(){APForm.program_of_study.empty();APForm.program_of_study.val(JSON.stringify(ProgramOfStudy.schedule))}function update_schedule_object(){ProgramOfStudy.schedule=$j.parseJSON(APForm.program_of_study.val())}var APForm={initiation_date:$j("#intiation_date"),graduation_year:$j("#graduation_year"),review_date_7:$j("#review_date_7"),review_date_8:$j("#review_date_8"),review_date_9:$j("#review_date_9"),review_date_10:$j("#review_date_10"),review_date_11:$j("#review_date_11"),review_date_12:$j("#review_date_12"),career_goal:$j("career_goal"),occupation_of_interest:$j("occupation_of_interest"),career_cluster:$j("#career_cluster"),va_cte_career_family_code:$j("#va_cte_career_family_code"),career_pathway:$j("#career_pathway"),va_cte_career_pathway:$j("#va_cte_career_pathway"),career_assessment:$j("#career_assessment"),career_assessment_date:$j("#career_assessment_date"),career_assessment_result:$j("#career_assessment_result"),career_assessment_description:$j("#career_assessment_description"),industry_certifications:$j("#industry_certifications"),diploma_goal:$j("#diploma_goal"),early_college_scholar:$j("#early_college_scholar"),commonwealth_scholar:$j("#commonwealth_scholar"),diploma_seal_checkboxes:[$j("#ds_governors"),$j("#ds_board_of_education"),$j("#ds_career_and_technical_education"),$j("#ds_advanced_mathematics_and_technology"),$j("#ds_seal_for_excellence_in_civics_education")],diploma_seal_code:$j("#diploma_seal_code"),diploma_seal_copy_to_state_field:$j("#ds_copy_to_state_field"),current_state_diploma_seal_code:$j("#current_state_diploma_seal_code"),va_diploma_seal:$j("#va_diploma_seal"),sat_goal:$j("#sat_goal"),act_goal:$j("#act_goal"),college:$j("#college"),military:$j("#military"),program_of_study:$j("#program_of_study")};$j(function(){var e=false;update_diploma_seal_checkboxes(APForm.diploma_seal_code.val());$j(APForm.diploma_seal_checkboxes).each(function(){$j(this).change(function(){update_diploma_seal_field()})});$j.getJSON("career_pathways.json").done(function(e){CTECareerClusters=e;update_career_cluster_options();update_career_pathway_options()});$j.getJSON("program_of_study.json").done(function(e){ProgramOfStudy=e;create_program_of_study_table();if(APForm.program_of_study.val().length>0){update_schedule_object()}else{ProgramOfStudy.schedule=[]}update_program_of_study_table();$j('a[class="select_all"]').each(function(){$j(this).click(function(){select_all($j(this).attr("data-grade_level"))})});$j('a[id="add_to_grade_level"]').each(function(){$j(this).css("visibility","visible");$j(this).click(function(){show_add_courses_dialog($j(this).data("grade_level"),null)})});$j('a[id="add_to_non_grade_level"]').each(function(){$j(this).click(function(){show_add_courses_dialog(null,$j(this).data("subject"))})})});$j("#add_courses_button").click(function(){add_courses();$j("#add_courses_to_grade_level_div").dialog("close")});APForm.career_cluster.change(function(){update_state_career_cluster();update_career_pathway_options();update_state_career_pathway()});APForm.career_pathway.change(function(){update_state_career_pathway()});$j("#ds_copy_to_state_field").click(function(){update_state_diploma_seal_code();update_state_diploma_seal_code_display()});$j("#group_action").click(function(){group_action($j("#selected_action").val());$j("#selected_action").val("")});$j("form").submit(function(){update_POS_field();return true});$j("#show_inputs").click(function(){if(e===false){$j("input.pos_course_input").each(function(){$j(this).css("display","inline")});e=true}else{$j("input.pos_course_input").each(function(){$j(this).css("display","none")});e=false}})})